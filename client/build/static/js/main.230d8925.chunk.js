(this["webpackJsonpimage-crop-and-zoom"]=this["webpackJsonpimage-crop-and-zoom"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),o=n(20),a=n.n(o),i=n(4),r=(n(79),n(12)),l=n(5),j=Object(c.createContext)(null),d=n(8),u=n(13),b=n(29),h=n(16),O=n(28),m=n.n(O),p=n(39),f=(n(57),n(55)),x=n(144),g=function(e){return new Promise((function(t,n){var c=new Image;c.addEventListener("load",(function(){return t(c)})),c.addEventListener("error",(function(e){return n(e)})),c.setAttribute("crossOrigin","anonymous"),c.src=e}))};function v(e){return e*Math.PI/180}function N(e,t){return w.apply(this,arguments)}function w(){return w=Object(p.a)(m.a.mark((function e(t,n){var c,s,o,a,i,r,l,j=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j.length>2&&void 0!==j[2]?j[2]:0,e.next=3,g(t);case 3:return s=e.sent,o=document.createElement("canvas"),a=o.getContext("2d"),i=Math.max(s.width,s.height),r=i/2*Math.sqrt(2)*2,o.width=r,o.height=r,a.translate(r/2,r/2),a.rotate(v(c)),a.translate(-r/2,-r/2),a.drawImage(s,r/2-.5*s.width,r/2-.5*s.height),l=a.getImageData(0,0,r,r),o.width=n.width,o.height=n.height,a.putImageData(l,0-r/2+.5*s.width-n.x,0-r/2+.5*s.height-n.y),e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var y=n(140),k=n(47),S=n(143),C=n(142),_=n(1);function P(e){return Object(_.jsx)(C.a,Object(k.a)({elevation:6,variant:"filled"},e))}var B=Object(y.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),M=s.a.createContext();function I(e){var t=e.children,n=B(),c=s.a.useState({open:!1,severity:"",message:""}),o=Object(i.a)(c,2),a=o[0],r=o[1],l=function(){return r(Object(k.a)(Object(k.a)({},a),{},{open:!1}))},j=a.open,d=a.severity,u=a.message;return Object(_.jsxs)(M.Provider,{value:function(e,t,n){return r(Object(k.a)(Object(k.a)({},a),{},{open:e,message:t,severity:n}))},children:[Object(_.jsx)("div",{className:n.root,children:Object(_.jsx)(S.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:j,autoHideDuration:6e3,onClose:l,children:Object(_.jsx)(P,{onClose:l,severity:d,children:u})})}),t]})}var R=function(e,t){for(var n=e.split(","),c=n[0].match(/:(.*?);/)[1],s=atob(n[1]),o=s.length,a=new Uint8Array(o);o--;)a[o]=s.charCodeAt(o);return new File([a],t,{type:c})},A=n(42),E=n(43),F=n(41),T=Object(y.a)({iconButton:{position:"absolute",top:"20px",right:"20px"},cancelIcon:{color:"#00a3c8",fontSize:"50px","&:hover":{color:"red"}}});function z(e){T();var t=s.a.useRef(),n=function(){return t.current.click()},c=s.a.useContext(M),o=s.a.useState(null),a=Object(i.a)(o,2),r=a[0],l=a[1],j=s.a.useState(null),b=Object(i.a)(j,2),h=b[0],O=b[1],g=s.a.useState({x:0,y:0}),v=Object(i.a)(g,2),w=v[0],y=v[1],k=s.a.useState(1),S=Object(i.a)(k,2),C=S[0],P=S[1],B=function(){var t=Object(p.a)(m.a.mark((function t(){var n,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",c(!0,"select an image!","warning"));case 2:return t.next=4,N(r,h);case 4:n=t.sent,s=n.toDataURL("image/jpeg"),o=R(s,"cropped-image.jpeg"),e.sendFile(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"change-pic-container",children:Object(_.jsxs)("div",{className:"change-pic-middle-container",children:[Object(_.jsx)("div",{className:"change-pic-heading",children:Object(_.jsx)(u.d,{onClick:function(){e.close("close")}})}),Object(_.jsx)("div",{className:"container-cropper-wrapper",children:Object(_.jsx)("div",{className:"container-cropper",children:r?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"cropper",children:Object(_.jsx)(f.a,{image:r,crop:w,zoom:C,aspect:1,onCropChange:y,onZoomChange:P,onCropComplete:function(e,t){O(t)}})}),Object(_.jsx)("div",{className:"slider",children:Object(_.jsx)(x.a,{min:1,max:3,step:.1,value:C,onChange:function(e,t){return P(t)},color:"secondary"})})]}):Object(_.jsxs)("div",{className:"select-img-container",onClick:n,children:[Object(_.jsx)("div",{className:"select-img-wrapper",children:Object(_.jsx)(F.a,{})}),Object(_.jsx)("p",{children:"Please Select an image"})]})})}),Object(_.jsxs)("div",{className:"container-buttons",children:[Object(_.jsx)("input",{type:"file",accept:"image/*",ref:t,onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.addEventListener("load",(function(){l(t.result)}))}},style:{display:"none"}}),Object(_.jsx)("button",{className:"MdClear",onClick:function(){return function(){if(!r)return c(!0,"select an image!","warning");l(null)}()},title:"Remove Image",children:Object(_.jsx)(d.a,{title:"Close"})}),Object(_.jsx)("button",{className:"CgBrowser",onClick:n,title:"Browse Image",children:Object(_.jsx)(A.a,{})}),Object(_.jsx)("button",{className:"FiUpload",onClick:B,title:"Upload",children:Object(_.jsx)(E.b,{})})]})]})})}function J(e){return Object(_.jsx)(z,{sendFile:function(t){e.selectedFile(t)},close:function(t){e.closeModal(t)}})}var L=n(27),U=(n(90),n(145)),q=n(141),D=Object(y.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),G=s.a.createContext();function Z(e){var t=e.children,n=D(),c=s.a.useState(!1),o=Object(i.a)(c,2),a=o[0],r=o[1],l=function(){r(!1)};return Object(_.jsxs)(G.Provider,{value:{closeBackdrop:l,showBackdrop:function(){r(!a)}},children:[Object(_.jsx)(U.a,{className:n.backdrop,open:a,onClick:l,children:Object(_.jsx)(q.a,{color:"inherit"})}),t]})}var H=function(e){Object(r.g)();var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(""),l=Object(i.a)(a,2),j=l[0],d=l[1],h=Object(c.useState)(),O=Object(i.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(),x=Object(i.a)(f,2),g=x[0],v=x[1],N=Object(c.useState)(!1),w=Object(i.a)(N,2),y=w[0],k=w[1];Object(c.useEffect)((function(){j&&function(){var e=new FormData;e.append("file",j),e.append("upload_preset","social-photos"),e.append("cloud_name","dxuwjnsg5"),fetch("https://api.cloudinary.com/v1_1/dxuwjnsg5/image/upload",{method:"POST",body:e}).then((function(e){e.json().then((function(e){e.error&&console.log(e.error),v(e.url),p(e.url)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}()}),[j]);function S(){fetch("/post/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:s,photo:m})}).then((function(e){e.json().then((function(e){e.error?L.b.error("Please enter a title or a Photo",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):window.location.reload()})).catch((function(e){console.log(e)}))}))}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L.a,{}),y?Object(_.jsx)(I,{children:Object(_.jsx)(Z,{children:Object(_.jsx)(J,{selectedFile:function(e){d(e),k(!1)},closeModal:function(){k(!1)}})})}):null,Object(_.jsxs)("div",{className:"create-post-container",children:[Object(_.jsx)("input",{value:s,onChange:function(e){o(e.target.value)},type:"text",className:"create-post-title",placeholder:"Whats on your mind ?"}),Object(_.jsx)("div",{className:"preview-photo-container",children:g?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(b.a,{onClick:function(){p(),v()}}),Object(_.jsx)("img",{className:"photo-preview",src:g})," "]}):null}),Object(_.jsxs)("div",{className:"post-file-container",children:[Object(_.jsx)("label",{onClick:function(){k(!0)},className:"file-label",children:Object(_.jsx)(u.c,{})}),Object(_.jsx)("button",{type:"submit",onClick:function(){S()},className:"create-post-submit",children:"Post"})]})]})]})},W=n(25),$=n(33),Y=n(44),K=n.n(Y),Q=n(22),V=function(){var e=Object(r.g)(),t=Object(c.useContext)(j),n=t.state,s=t.dispatch,o=Object(c.useState)(!1),a=Object(i.a)(o,2),d=a[0],u=a[1],h=Object(c.useState)(),O=Object(i.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(""),x=Object(i.a)(f,2),g=x[0],v=x[1],N=Object(c.useState)([]),w=Object(i.a)(N,2),y=w[0],k=w[1],S=Object(c.useState)(!1),C=Object(i.a)(S,2),P=C[0],B=C[1];function M(){fetch("/user/".concat(n._id,"/influence"),{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json().then((function(e){k(e.user.requests)})).catch((function(e){return console.log(e)}))}))}return Object(c.useEffect)((function(){n&&M()}),[n]),Object(_.jsxs)(_.Fragment,{children:[d?Object(_.jsx)("div",{className:"modal-background",children:Object(_.jsxs)("div",{className:"modal-container",children:[Object(_.jsx)("h4",{children:"Sign Out "}),Object(_.jsx)("button",{className:"modal-cancel",onClick:function(){u(!1)},children:Object(_.jsx)(b.a,{})}),Object(_.jsx)("p",{children:"Are you sure you want to Sign Out ?"}),Object(_.jsxs)("div",{className:"modal-buttons",children:[Object(_.jsx)("button",{onClick:function(){u(!1),localStorage.clear(),s({type:"CLEAR"}),e.push("/sign-in")},children:"Yes"}),Object(_.jsx)("button",{onClick:function(){u(!1)},children:"No"})]})]})}):null,Object(_.jsxs)("div",{className:"navbar-container",children:[Object(_.jsx)(l.b,{to:"/",className:"navbar-brand",children:Object(_.jsx)("img",{src:"https://res.cloudinary.com/dagwb842k/image/upload/v1645510918/logo_oqwcfr.png",alt:"brandLogo"})}),n?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"search-bar-container",children:[Object(_.jsx)("input",{type:"text",className:"search-bar",placeholder:"Search for people",value:g,onChange:function(e){var t;t=e.target.value,v(t),fetch("/user/search-user",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({query:t})}).then((function(e){e.json().then((function(e){p(e.found)}))})).catch((function(e){console.log(e)}))}}),Object(_.jsx)(l.b,{to:"/profile",children:Object(_.jsx)($.b,{className:"search-icon"})}),m?m.length>0?Object(_.jsxs)("div",{className:"found-container",children:[" ",m.map((function(e,t){return Object(_.jsx)("div",{children:Object(_.jsx)(l.b,{to:"/".concat(e._id),target:"_blank",children:Object(_.jsxs)("div",{className:"found-user",children:[Object(_.jsx)("div",{className:"found-user-image-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsx)("p",{className:"found-user-name",children:e.name})]})})},t)}))]}):Object(_.jsx)("div",{className:"found-container",children:Object(_.jsx)("div",{className:"found-user",children:Object(_.jsx)("p",{className:"found-user-name",children:"No users found"})})}):null]}),Object(_.jsxs)("div",{className:"navbar-links",children:[Object(_.jsxs)("button",{className:"requests-container-open-button",onClick:function(){B(!P)},children:[Object(_.jsx)(Q.b,{}),y.length>0?Object(_.jsx)("div",{className:"notifications-count",children:y.length}):null]}),Object(_.jsx)(l.b,{to:"/profile",className:"requests-container-open- navBlinks",children:Object(_.jsx)("div",{className:"profile-image-wrapper",children:Object(_.jsx)("img",{src:n.profilePhoto})})}),Object(_.jsx)(l.b,{to:"/settings/change-name",className:"requests-container-open-button navBlinks",children:Object(_.jsx)(E.a,{})}),y?y.length>0?Object(_.jsxs)("div",{className:P?"requests-container":"requests-container notifications-not-active",children:[" ",y.map((function(e,t){return Object(_.jsxs)("div",{className:"requests-user",children:[Object(_.jsx)("div",{className:"requests-user-image-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsx)(l.b,{to:"/".concat(e._id),target:"_blank",children:Object(_.jsx)("p",{className:"requests-user-name",children:e.name})}),Object(_.jsxs)("div",{className:"request-button-container",children:[Object(_.jsx)("button",{className:"request-accept",onClick:function(){var t;t=e._id,fetch("/user//accept-follow",{method:"put",headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({requesterId:t})}).then((function(e){return e.json().then((function(e){M()})).catch((function(e){return console.log(e)}))}))},children:"Accept"}),Object(_.jsx)("button",{className:"request-accept",onClick:function(){var t;t=e._id,fetch("/user/decline-follow",{method:"put",headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:t})}).then((function(e){return e.json().then((function(e){M()})).catch((function(e){return console.log(e)}))}))},children:"Decline"})]})]},t)}))]}):Object(_.jsx)("div",{className:P?"requests-container":"requests-container notifications-not-active",children:Object(_.jsx)("div",{className:"requests-user",children:Object(_.jsx)("p",{className:"requests-user-name",children:"No requests"})})}):null]})]}):Object(_.jsx)(_.Fragment,{})]})]})},X=function(){var e=Object(c.useContext)(j),t=e.state;e.dispatch;return t?Object(_.jsx)("div",{className:"left-sidebar-container",children:Object(_.jsxs)("div",{className:"left-sidebar-links-container",children:[Object(_.jsxs)(l.b,{to:"/profile",className:"left-sidebar-link-profile",children:[Object(_.jsx)("div",{className:"profile-image-wrapper",style:{margin:"2px"},children:Object(_.jsx)("img",{src:t.profilePhoto})}),Object(_.jsx)("p",{children:t.name})]}),Object(_.jsxs)(l.b,{className:"left-sidebar-link",to:"/",children:[Object(_.jsx)("div",{className:"left-sidebar-link-icons",children:Object(_.jsx)(d.d,{})})," ",Object(_.jsx)("p",{children:"Feeds"})," "]}),Object(_.jsxs)(l.b,{className:"left-sidebar-link",to:"/profile",children:[Object(_.jsx)("div",{className:"left-sidebar-link-icons",children:Object(_.jsx)(F.b,{})})," ",Object(_.jsx)("p",{children:"Profile"})]}),Object(_.jsxs)(l.b,{className:"left-sidebar-link",to:"/settings/change-name",children:[Object(_.jsx)("div",{className:"left-sidebar-link-icons",children:Object(_.jsx)(Q.c,{})})," ",Object(_.jsx)("p",{children:"Settings"})]})]})}):Object(_.jsx)(_.Fragment,{})},ee=function(){var e=Object(r.g)(),t=Object(c.useContext)(j).state,n=Object(c.useState)([]),s=Object(i.a)(n,2),o=s[0],a=s[1],O=Object(c.useState)(""),m=Object(i.a)(O,2),p=m[0],f=m[1],x=Object(c.useState)(!1),g=Object(i.a)(x,2),v=g[0],N=g[1],w=Object(c.useState)(),y=Object(i.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)(),P=Object(i.a)(C,2),B=P[0],M=P[1],I=Object(c.useState)(!1),R=Object(i.a)(I,2),A=R[0],E=R[1],F=Object(c.useState)(!0),T=Object(i.a)(F,2),z=T[0],J=T[1],L=Object(c.useState)(!1),U=Object(i.a)(L,2),q=U[0],D=U[1],G=Object(c.useRef)(),Z=Object(c.useRef)(),Y=Object(c.useRef)();function ee(){fetch("/post/view-all-posts",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){return t.json().then((function(t){t.error?(console.log(t.error),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")):(a(t),console.log(t))})).catch((function(t){console.log(t),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")}))}))}function te(e){fetch("/post/li-com-info/".concat(e),{method:"GET",headers:{contentType:"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){e.json().then((function(e){M(e.post)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}function ne(e,t){fetch("./post/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postID:e})}).then((function(t){t.json().then((function(t){S(t);var n=o.map((function(e){return e._id===t._id?t:e}));a(n),ee(),te(e)})).catch((function(e){console.log(e)}))}))}function ce(e,t){fetch("./post/comment",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:e,postId:t})}).then((function(e){e.json().then((function(e){f(""),S(e);var n=o.map((function(t){return t._id===e._id?e:t}));a(n),ee(),te(t)})).catch((function(e){console.log(e)}))}))}function se(e){return e.likes.includes(t._id)?Object(_.jsx)("button",{className:"post-card-like-button",onClick:function(){ne(e._id,"dislike")},children:Object(_.jsx)(u.a,{})}):Object(_.jsx)("button",{className:"post-card-like-button",onClick:function(){ne(e._id,"like")},children:Object(_.jsx)(u.b,{})})}return Object(c.useEffect)((function(){ee()}),[]),void 0==o?Object(_.jsx)("div",{className:"Loader",children:Object(_.jsx)(K.a,{})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(V,{}),Object(_.jsx)("div",{className:"layout-container",children:t?Object(_.jsx)(X,{}):null}),k&&v?(te(k._id),Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"postModal-container",children:Object(_.jsxs)("div",{className:"postModal-image-info-container",children:[Object(_.jsx)("div",{className:"post-modal-cancel-button",children:Object(_.jsx)($.a,{onClick:function(){N(!1),S()}})}),k.photo?Object(_.jsx)("div",{className:"postModal-image",children:Object(_.jsx)("img",{src:k.photo})}):null,Object(_.jsxs)("div",{className:"postModal-info-container",children:[Object(_.jsxs)("div",{className:"name-photo-container",children:[Object(_.jsx)("div",{className:"postModal-postedby-photo-container",children:Object(_.jsx)("img",{src:k.postedBy.profilePhoto})}),Object(_.jsx)("label",{className:"postModal-post-by",children:Object(_.jsx)(l.b,{to:t.id===k.postedBy._id?"./profile":"/".concat(k.postedBy._id),children:k.postedBy.name})}),t._id===k.postedBy._id?Object(_.jsxs)("div",{className:"postModal-delete-post-button",onClick:function(){return D(k._id)},children:[Object(_.jsx)("button",{children:Object(_.jsx)(d.b,{})})," "]}):null]}),k.title&&Object(_.jsx)("p",{className:"postModal-post-title",children:k.title}),Object(_.jsxs)("div",{className:"post-modal-li-com-toggle-container",children:[Object(_.jsx)("button",{className:A?"postModal-comments-heading active-li-com":"postModal-comments-heading",onClick:function(){J(!1),E(!0)},children:"Likes"}),Object(_.jsx)("button",{className:z?"postModal-comments-heading active-li-com":"postModal-comments-heading",onClick:function(){J(!0),E(!1)},children:"Comments"})]}),A&&B?Object(_.jsx)("div",{ref:G,className:"scrolling-container",id:"comments-holder",children:B.likes.map((function(e,t){return Object(_.jsxs)("div",{className:"comment-wrapper",children:[Object(_.jsx)("div",{className:"comment-wrapper-image-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsxs)("label",{children:[Object(_.jsx)(l.b,{to:"/".concat(e._id),children:e.name})," "]})]},t)}))}):null,z&&B?Object(_.jsx)("div",{ref:G,className:"scrolling-container",id:"comments-holder",children:B.comments.map((function(e,n){return Object(_.jsxs)("div",{className:"comment-wrapper",children:[Object(_.jsx)("div",{className:"comment-wrapper-image-container",children:Object(_.jsx)("img",{src:e.postedBy.profilePhoto})}),Object(_.jsxs)("label",{children:[Object(_.jsxs)(l.b,{to:"/".concat(e.postedBy._id),target:"_blank",children:[e.postedBy.name," "]})," "]}),Object(_.jsx)("p",{className:"postModal-each-comment",children:e.text}),e.postedBy._id===t._id?Object(_.jsx)(Q.a,{className:"postModal-delete-comment-button",onClick:function(){var t,n;t=e.text,n=k._id,fetch("./post/delete-comment/".concat(n),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:t,postId:n})}).then((function(e){return e.json().then((function(e){S(e),ee(),te(n)})).catch((function(e){return console.log(e)}))}))}}):null]},n)}))}):null,Object(_.jsxs)("div",{className:"postModal-li-com-container",children:[se(k),Object(_.jsxs)("span",{className:"postModal-likes-number",children:[k.likes.length," Likes"]}),Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(W.a,{})]}),Object(_.jsxs)("label",{className:"postModal-likes-number",children:[k.comments.length," Comments"]})]}),Object(_.jsxs)("div",{className:"postModal-comment-section",children:[Object(_.jsx)("input",{ref:Y,type:"text",className:"postModal-comment-input",placeholder:"add you comment here",value:p,onChange:function(e){return f(e.target.value)}}),/\S/.test(p)?Object(_.jsx)("button",{className:"postModal-comment-button",onClick:function(){ce(Y.current.value,k._id)},children:Object(_.jsx)(d.e,{})}):null]})]})]})})})):null,Object(_.jsxs)("div",{className:"createPost-header",children:[Object(_.jsxs)("div",{className:"createPost-header-containers",children:[Object(_.jsx)(b.b,{className:" cp-one"}),Object(_.jsx)("p",{children:"Share an update"})]}),Object(_.jsxs)("div",{className:"createPost-header-containers ",children:[Object(_.jsx)(d.c,{className:" cp-two "}),Object(_.jsx)("p",{children:"Upload a photo"})]}),Object(_.jsxs)("div",{className:"createPost-header-containers ",children:[Object(_.jsx)(h.c,{className:" cp-three"}),Object(_.jsx)("p",{children:"Share a Post"})]})]}),Object(_.jsx)(H,{}),0===o.length?Object(_.jsxs)("div",{className:"nothing-to-show-container",children:[Object(_.jsx)("p",{children:"Nothing to show"}),Object(_.jsx)("div",{className:"nothing-to-show-svg-container",children:Object(_.jsx)(h.a,{})})]}):o.map((function(e,n){return Object(_.jsxs)("div",{className:"home-container",children:[q?Object(_.jsx)("div",{className:"modal-background",children:Object(_.jsxs)("div",{className:"modal-container",children:[Object(_.jsx)("h4",{children:"Delete Post "}),Object(_.jsx)("button",{className:"modal-cancel",onClick:function(){D(!1)},children:Object(_.jsx)(b.a,{})}),Object(_.jsx)("p",{children:"Are you sure you want to delete this post ?"}),Object(_.jsxs)("div",{className:"modal-buttons",children:[Object(_.jsx)("button",{onClick:function(){var t;t=e._id,fetch("./post/delete/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json().then((function(e){var t=o.filter((function(t){return e._id!=t._id}));a(t)})).catch((function(e){return console.log(e)}))})),D(!1)},children:"Yes"}),Object(_.jsx)("button",{onClick:function(){D(!1)},children:"No"})]})]})}):null,Object(_.jsxs)("div",{className:"post-card",children:[Object(_.jsx)("div",{className:"postedby-photo-container",children:Object(_.jsx)("img",{src:e.postedBy.profilePhoto})}),Object(_.jsx)("p",{className:"post-card-by",children:Object(_.jsx)(l.b,{to:t.id===e.postedBy._id?"./profile":"/".concat(e.postedBy._id),children:e.postedBy.name})}),Object(_.jsx)("p",{className:"post-card-title",children:e.title}),t._id===e.postedBy._id?Object(_.jsx)("button",{className:"delete-post-button",onClick:function(){return D(!0)},children:Object(_.jsx)(d.b,{})}):null,e.photo&&Object(_.jsx)("div",{className:"post-card-img-container",children:Object(_.jsx)("img",{onClick:function(){N(!0),te(e._id),S(e)},className:"post-card-img",src:e.photo})}),Object(_.jsxs)("div",{className:"li-com-container",children:[se(e),Object(_.jsxs)("span",{className:"likes-number",onClick:function(){J(!1),E(!0),N(!0),S(e)},children:[e.likes.length," Likes"]}),Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(W.a,{})]}),Object(_.jsxs)("label",{className:"likes-number",onClick:function(){J(!0),E(!1),N(!0),S(e)},children:[e.comments.length," Comments"]})]}),Object(_.jsxs)("div",{className:"comment-section",children:[Object(_.jsx)("input",{ref:Z,type:"text",className:"comment-input",placeholder:"add you comment here",value:p,onChange:function(e){return f(e.target.value)}}),/\S/.test(p)?Object(_.jsx)("button",{className:"comment-button",onClick:function(){Z.current&&ce(Z.current.value,e._id)},children:Object(_.jsx)(d.e,{})}):null]})]},n)]},n)}))]})},te=n(54),ne=function(){var e=Object(c.useContext)(j),t=e.state,n=e.dispatch,s=Object(r.g)(),o=Object(c.useState)(""),a=Object(i.a)(o,2),d=a[0],u=a[1],b=Object(c.useState)(""),O=Object(i.a)(b,2),m=O[0],p=O[1],f=Object(c.useState)(!1),x=Object(i.a)(f,2),g=x[0],v=x[1];return t&&s.push("/"),Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"auth-page",children:Object(_.jsxs)("div",{className:"auth-page-container",children:[Object(_.jsx)("div",{className:"auth-page-image-container",children:Object(_.jsx)("img",{src:"./auth.jpg"})}),Object(_.jsxs)("div",{className:"sign-in-container",children:[Object(_.jsxs)("div",{className:"sign-in-heading",children:[Object(_.jsx)("p",{className:"sign-in-heading-brand",children:"Login to SS"}),Object(_.jsxs)("p",{className:"sign-in-heading-signin",children:["Welcome to the SS ! ",Object(_.jsx)("br",{})," Login with the credentials used during registration"]})]}),Object(_.jsxs)("div",{className:"sign-in-form",children:[Object(_.jsxs)("div",{className:"sign-in-email-container",children:[Object(_.jsx)("span",{children:Object(_.jsx)(te.a,{})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{children:"Email "}),Object(_.jsx)("input",{type:"email",value:d,onChange:function(e){return u(e.target.value)},className:"sign-in-email-input"})]})]}),Object(_.jsxs)("div",{className:"sign-in-passoword-container",children:[Object(_.jsx)("span",{children:Object(_.jsx)(h.b,{})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{children:"Password"}),Object(_.jsx)("input",{type:"password",value:m,onChange:function(e){return p(e.target.value)},className:"sign-in-passoword-input"})]})]}),Object(_.jsx)("div",{className:"remember-me-forgot-container",children:Object(_.jsx)("label",{children:Object(_.jsx)(l.b,{to:"/forgot-password",children:"forgot password ?"})})}),g?Object(_.jsx)("p",{className:"invalid-login",children:"Your Username and Password don't match !"}):null,Object(_.jsx)("button",{onClick:function(){fetch("/auth/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:m})}).then((function(e){e.json().then((function(e){e.error?(console.log(e.error),v(!0),u(""),p("")):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),n({type:"USER",payload:e.user}),s.push("/"))}))}))},className:"sign-in-button",children:"Sign In"}),Object(_.jsxs)("p",{className:"new-account-link",children:['Don"t have an account? ',Object(_.jsx)(l.b,{to:"/sign-up",children:"Register"})]})]})]})]})})})},ce=function(){var e=Object(r.g)(),t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(""),j=Object(i.a)(a,2),d=j[0],u=j[1],b=Object(c.useState)(""),O=Object(i.a)(b,2),m=O[0],p=O[1],f=Object(c.useState)(!1),x=Object(i.a)(f,2),g=x[0],v=x[1],N=Object(c.useState)(!0),w=Object(i.a)(N,2),y=(w[0],w[1],Object(c.useState)(!1)),k=Object(i.a)(y,2),S=k[0],C=k[1],P=""!==s.trim(),B=!P&&S,M=Object(c.useState)(!1),I=Object(i.a)(M,2),R=I[0],E=I[1],F=""!==d.trim()&&!!/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(String(d).toLowerCase()),T=!F&&R,z=Object(c.useState)(!1),J=Object(i.a)(z,2),L=J[0],U=J[1],q=""!==m.trim()&&!!/(?=^.{6,}$)(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])(?=.*[^A-Za-z0-9]).*/.test(String(m)),D=!q&&L,G=!1;return P&&F&&q&&(G=!0),Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"auth-page-container",children:[Object(_.jsx)("div",{className:"auth-page-image-container",children:Object(_.jsx)("img",{src:"./auth.jpg"})}),Object(_.jsxs)("div",{className:"sign-in-container",children:[Object(_.jsxs)("div",{className:"sign-in-heading",children:[Object(_.jsx)("p",{className:"sign-in-heading-brand",children:"Create an Account"}),Object(_.jsx)("p",{className:"sign-in-heading-signin",children:"Join SS Today !"})]}),Object(_.jsxs)("div",{className:"sign-in-form",children:[Object(_.jsxs)("div",{className:"sign-in-name-container",children:[Object(_.jsx)("span",{children:Object(_.jsx)(A.b,{})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{children:"Name "}),Object(_.jsx)("input",{type:"text",value:s,className:"sign-in-name-input",onChange:function(e){!function(e){o(e.target.value)}(e)},onBlur:function(){C(!0)}})]})]}),B&&Object(_.jsx)("p",{className:"invalid-login",children:" Enter name properly !"}),Object(_.jsxs)("div",{className:"sign-in-email-container",children:[Object(_.jsx)("span",{children:Object(_.jsx)(te.a,{})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{children:"Email "}),Object(_.jsx)("input",{type:"email",value:d,className:"sign-in-email-input",onChange:function(e){!function(e){u(e.target.value)}(e)},onBlur:function(){E(!0)}})]})]}),T&&Object(_.jsx)("p",{className:"invalid-login",children:" Enter email address properly !"}),Object(_.jsxs)("div",{className:"sign-in-passoword-container",children:[Object(_.jsx)("span",{children:Object(_.jsx)(h.b,{})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{children:"Password"}),Object(_.jsx)("input",{type:"password",value:m,className:"sign-in-passoword-input",onChange:function(e){!function(e){p(e.target.value)}(e)},onBlur:function(){U(!0)}})]})]}),D&&Object(_.jsx)("p",{className:"invalid-login",children:" Must contain a digit, an uppercase letter, a lowercase letter, a character not being alphanumeric."}),G?Object(_.jsx)("button",{onClick:function(){v(!1),fetch("/auth/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:d,password:m})}).then((function(t){t.json().then((function(t){console.log(t),"email already exist"===t.error?v(!0):e.push("/sign-in")}))}))},className:"sign-in-button",children:"Register"}):Object(_.jsx)("button",{className:"sign-in-button invalid-button",children:"Register"}),g&&Object(_.jsx)("p",{className:"invalid-login",style:{textAlign:"center"},children:"This email is already registered."}),Object(_.jsxs)("p",{className:"new-account-link",children:["Already have an account? ",Object(_.jsx)(l.b,{to:"/sign-in",children:"Login"})]})]})]})]})})},se=function(){var e=Object(r.g)(),t=Object(c.useContext)(j),n=t.state,s=(t.dispatch,Object(c.useState)()),o=Object(i.a)(s,2),a=o[0],O=o[1],m=Object(c.useState)(),p=Object(i.a)(m,2),f=p[0],x=p[1],g=Object(c.useState)(""),v=Object(i.a)(g,2),N=v[0],w=v[1],y=Object(c.useRef)(),k=Object(c.useRef)(),S=Object(c.useState)(!0),C=Object(i.a)(S,2),P=C[0],B=C[1],M=Object(c.useState)(!1),I=Object(i.a)(M,2),R=I[0],A=I[1],E=Object(c.useState)(!1),F=Object(i.a)(E,2),T=F[0],z=F[1],J=Object(c.useState)(),L=Object(i.a)(J,2),U=L[0],q=L[1],D=Object(c.useState)(),G=Object(i.a)(D,2),Z=G[0],H=G[1],Y=Object(c.useState)([]),ee=Object(i.a)(Y,2),te=ee[0],ne=ee[1],ce=Object(c.useState)([]),se=Object(i.a)(ce,2),oe=se[0],ae=se[1],ie=Object(c.useState)(!1),re=Object(i.a)(ie,2),le=re[0],je=re[1],de=Object(c.useState)(),ue=Object(i.a)(de,2),be=ue[0],he=ue[1],Oe=Object(c.useRef)(),me=Object(c.useState)(!1),pe=Object(i.a)(me,2),fe=pe[0],xe=pe[1],ge=Object(c.useState)(!1),ve=Object(i.a)(ge,2),Ne=ve[0],we=ve[1],ye=Object(c.useState)(!1),ke=Object(i.a)(ye,2),Se=ke[0],Ce=ke[1],_e=Object(c.useState)(!0),Pe=Object(i.a)(_e,2),Be=Pe[0],Me=Pe[1],Ie=Object(c.useState)(),Re=Object(i.a)(Ie,2),Ae=Re[0],Ee=Re[1];function Fe(){fetch("/post//view-my-posts",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){return t.json().then((function(t){t.error?(console.log(t.error),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")):(x(t.user),O(t.found))})).catch((function(t){console.log(t),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")}))}))}function Te(e){fetch("/post/li-com-info/".concat(e),{method:"GET",headers:{contentType:"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){e.json().then((function(e){Ee(e.post)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}function ze(e,t){fetch("./post/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postID:e})}).then((function(t){t.json().then((function(t){he(t);var n=a.map((function(e){return e._id===t._id?t:e}));O(n),Fe(),Te(e)})).catch((function(e){console.log(e)}))}))}function Je(e){return e.likes.includes(n._id)?Object(_.jsx)("button",{className:"post-card-like-button",onClick:function(){ze(e._id,"dislike")},children:Object(_.jsx)(u.a,{})}):Object(_.jsx)("button",{className:"post-card-like-button",onClick:function(){ze(e._id,"like")},children:Object(_.jsx)(u.b,{})})}function Le(e,t){fetch("./post/comment",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:e,postId:t})}).then((function(e){e.json().then((function(e){w(""),he(e);var n=a.map((function(t){return t._id===e._id?e:t}));O(n),Te(t)})).catch((function(e){console.log(e)}))}))}if(Object(c.useEffect)((function(){Fe(),n&&fetch("/user/".concat(n._id,"/influence"),{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){return t.json().then((function(t){t.error?(console.log(t.error),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")):(ae(t.user.followers),ne(t.user.following))})).catch((function(t){console.log(t),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")}))}))}),[n]),void 0==a)return Object(_.jsx)("div",{className:"Loader",children:Object(_.jsx)(K.a,{})});function Ue(){return Object(_.jsxs)("div",{className:"nothing-to-show-container",children:[Object(_.jsx)("p",{children:"Nothing to show"}),Object(_.jsx)("div",{className:"nothing-to-show-svg-container",children:Object(_.jsx)(h.a,{})})]})}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(V,{}),Object(_.jsx)("div",{className:"layout-container",children:n?Object(_.jsx)(X,{}):null}),Ne?Object(_.jsx)("div",{className:"coverProfilePicModal-container",children:Object(_.jsxs)("div",{className:"coverProfilePicModal-container-img-wrapper",children:[Object(_.jsx)(Q.a,{onClick:function(){we(!1)}}),Object(_.jsx)("img",{src:n.coverPhoto})]})}):null,fe?Object(_.jsx)("div",{className:"coverProfilePicModal-container",children:Object(_.jsxs)("div",{className:"coverProfilePicModal-container-img-wrapper",children:[Object(_.jsx)(Q.a,{onClick:function(){xe(!1)}}),Object(_.jsx)("img",{src:n.profilePhoto})]})}):null,be&&le?(Te(be._id),Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"postModal-container",children:Object(_.jsxs)("div",{className:"postModal-image-info-container",children:[Object(_.jsx)("div",{className:"post-modal-cancel-button",children:Object(_.jsx)($.a,{onClick:function(){je(!1),he()}})}),be.photo?Object(_.jsx)("div",{className:"postModal-image",children:Object(_.jsx)("img",{src:be.photo})}):null,Object(_.jsxs)("div",{className:"postModal-info-container",children:[Object(_.jsxs)("div",{className:"name-photo-container",children:[Object(_.jsx)("div",{className:"postModal-postedby-photo-container",children:Object(_.jsx)("img",{src:be.postedBy.profilePhoto})}),Object(_.jsx)("label",{className:"postModal-post-by",children:Object(_.jsx)(l.b,{to:n.id===be.postedBy._id?"./profile":"/".concat(be.postedBy._id),children:be.postedBy.name})}),n._id===be.postedBy._id?Object(_.jsxs)("div",{className:"postModal-delete-post-button",onClick:function(){return z(be._id)},children:[Object(_.jsx)("button",{children:Object(_.jsx)(d.b,{})})," "]}):null]}),Object(_.jsx)("p",{className:"postModal-post-title",children:be.title}),Object(_.jsxs)("div",{className:"post-modal-li-com-toggle-container",children:[Object(_.jsx)("button",{className:Se?"postModal-comments-heading active-li-com":"postModal-comments-heading",onClick:function(){Me(!1),Ce(!0)},children:"Likes"}),Object(_.jsx)("button",{className:Be?"postModal-comments-heading active-li-com":"postModal-comments-heading",onClick:function(){Me(!0),Ce(!1)},children:"Comments"})]}),Se&&Ae?Object(_.jsx)("div",{ref:Oe,className:"scrolling-container",id:"comments-holder",children:Ae.likes.map((function(e,t){return Object(_.jsxs)("div",{className:"comment-wrapper",children:[Object(_.jsx)("div",{className:"comment-wrapper-image-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsxs)("label",{children:[Object(_.jsx)(l.b,{to:"/".concat(e._id),children:e.name})," "]})]},t)}))}):null,Be&&Ae?Object(_.jsx)("div",{ref:Oe,className:"scrolling-container",id:"comments-holder",children:Ae.comments.map((function(e,t){return Object(_.jsxs)("div",{className:"comment-wrapper",children:[Object(_.jsx)("div",{className:"comment-wrapper-image-container",children:Object(_.jsx)("img",{src:e.postedBy.profilePhoto})}),Object(_.jsxs)("label",{children:[Object(_.jsxs)(l.b,{to:"/".concat(e.postedBy._id),target:"_blank",children:[e.postedBy.name," : "]})," "]}),Object(_.jsx)("p",{className:"postModal-each-comment",children:e.text}),e.postedBy._id===n._id?Object(_.jsx)(Q.a,{className:"postModal-delete-comment-button",onClick:function(){var t,n;t=e.text,n=be._id,fetch("./post/delete-comment/".concat(n),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:t,postId:n})}).then((function(e){return e.json().then((function(e){he(e),Fe(),Te(n)})).catch((function(e){return console.log(e)}))}))}}):null]},t)}))}):null,Object(_.jsxs)("div",{className:"postModal-li-com-container",children:[Je(be),Object(_.jsxs)("span",{className:"postModal-likes-number",children:[be.likes.length," Likes"]}),Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(W.a,{})]}),Object(_.jsxs)("label",{className:"postModal-likes-number",children:[be.comments.length," Comments"]})]}),Object(_.jsxs)("div",{className:"postModal-comment-section",children:[Object(_.jsx)("input",{ref:k,type:"text",className:"postModal-comment-input",placeholder:"add you comment here",value:N,onChange:function(e){return w(e.target.value)}}),/\S/.test(N)?Object(_.jsx)("button",{className:"postModal-comment-button",onClick:function(){Le(k.current.value,be._id)},children:Object(_.jsx)(d.e,{})}):null]})]})]})})})):null,Object(_.jsxs)("div",{className:"cover-photo-container",children:[Object(_.jsx)("img",{className:"cover-photo",src:n.coverPhoto,onClick:function(){we(!0)}}),Object(_.jsx)(l.b,{to:"/change-cover-picture",children:Object(_.jsx)(u.c,{})}),Object(_.jsxs)("div",{className:"profile-img-reference",children:[Object(_.jsx)("div",{className:"profile-img-wrapper",children:Object(_.jsx)("img",{src:n.profilePhoto,onClick:function(){xe(!0)}})}),Object(_.jsx)(l.b,{to:"/change-profile-picture",children:Object(_.jsx)(u.c,{})})]})]}),Object(_.jsxs)("div",{className:"profile-container",children:[Object(_.jsx)("div",{className:"profile-info-container",children:Object(_.jsxs)("div",{className:"profile-details-container",children:[Object(_.jsx)("p",{children:f.name}),Object(_.jsxs)("div",{className:"profile-details-container-spans",children:[Object(_.jsx)("span",{class:P?"tabActive":"",onClick:function(){B(!0),A(!1),H(!1),q(!1)},children:"Gallery"}),Object(_.jsxs)("span",{class:R?"tabActive":"",onClick:function(){B(!1),A(!0),H(!1),q(!1)},children:["(",a.length,") Posts"]}),Object(_.jsxs)("span",{class:U?"tabActive":"",onClick:function(){B(!1),A(!1),H(!1),q(!0)},children:[" (",f.followers.length,") Followers"]}),Object(_.jsxs)("span",{class:Z?"tabActive":"",onClick:function(){B(!1),A(!1),H(!0),q(!1)},children:["(",f.following.length,") Following"]})]})]})}),P?Object(_.jsx)("div",{className:"profile-photos-container",style:0===a.length?{display:"block",marginTop:"0"}:{},children:0===a.length?Ue():a.map((function(e,t){return e.photo?Object(_.jsx)("div",{className:"profile-photo-wrapper",children:Object(_.jsx)("img",{onClick:function(){je(!0),he(e)},src:e.photo})},t):null}))}):null,R?Object(_.jsx)(_.Fragment,{children:0===a.length?Ue():a.map((function(e,t){return Object(_.jsxs)("div",{children:[T?Object(_.jsx)("div",{className:"modal-background",children:Object(_.jsxs)("div",{className:"modal-container",children:[Object(_.jsx)("h4",{children:"Delete Post "}),Object(_.jsx)("button",{className:"modal-cancel",onClick:function(){z(!1)},children:Object(_.jsx)(b.a,{})}),Object(_.jsx)("p",{children:"Are you sure you want to delete this post ?"}),Object(_.jsxs)("div",{className:"modal-buttons",children:[Object(_.jsx)("button",{onClick:function(){var t;t=e._id,fetch("./post/delete/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json().then((function(e){var t=a.filter((function(t){return e._id!=t._id}));O(t),window.location.reload()})).catch((function(e){return console.log(e)}))})),z(!1)},children:"Yes"}),Object(_.jsx)("button",{onClick:function(){z(!1)},children:"No"})]})]})}):null,Object(_.jsxs)("div",{className:"post-card",children:[Object(_.jsx)("div",{className:"postedby-photo-container",children:Object(_.jsx)("img",{src:e.postedBy.profilePhoto})}),Object(_.jsx)("p",{className:"post-card-by",children:Object(_.jsx)(l.b,{to:n.id===e.postedBy._id?"./profile":"/".concat(e.postedBy._id),children:e.postedBy.name})}),Object(_.jsx)("p",{className:"post-card-title",children:e.title}),n._id===e.postedBy._id?Object(_.jsx)("button",{className:"delete-post-button",onClick:function(){return z(!0)},children:Object(_.jsx)(d.b,{})}):null,Object(_.jsx)("img",{onClick:function(){je(!0),Te(e._id),he(e)},className:"post-card-img",src:e.photo}),Object(_.jsxs)("div",{className:"li-com-container",children:[Je(e),Object(_.jsxs)("span",{className:"likes-number",onClick:function(){Me(!1),Ce(!0),je(!0),he(e)},children:[e.likes.length," Likes"]}),Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(W.a,{})]}),Object(_.jsxs)("label",{className:"likes-number",onClick:function(){Me(!0),Ce(!1),je(!0),he(e)},children:[e.comments.length," Comments"]})]}),Object(_.jsxs)("div",{className:"comment-section",children:[Object(_.jsx)("input",{ref:y,type:"text",className:"comment-input",placeholder:"add you comment here",value:N,onChange:function(e){return w(e.target.value)}}),/\S/.test(N)?Object(_.jsx)("button",{className:"comment-button",onClick:function(){y.current&&Le(y.current.value,e._id)},children:Object(_.jsx)(d.e,{})}):null]})]},t)]},t)}))}):null,U?Object(_.jsx)(_.Fragment,{children:0===oe.length?Ue():oe.map((function(e,t){return Object(_.jsxs)("div",{className:"followers-list-container",children:[Object(_.jsx)("div",{className:"followers-profile-img-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsx)(l.b,{to:"/".concat(e._id),target:"_blank",children:e.name})]},t)}))}):null,Z?Object(_.jsx)(_.Fragment,{children:0===te.length?Ue():te.map((function(e,t){return Object(_.jsxs)("div",{className:"followers-list-container",children:[Object(_.jsx)("div",{className:"followers-profile-img-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsx)(l.b,{to:"/".concat(e._id),target:"_blank",children:e.name})]},t)}))}):null]})]})},oe=function(){var e=Object(r.g)(),t=Object(c.useContext)(j).state,n=Object(c.useState)(),s=Object(i.a)(n,2),o=s[0],a=s[1],b=Object(c.useState)(),O=Object(i.a)(b,2),m=O[0],p=O[1],f=Object(r.h)().userid,x=Object(c.useState)(""),g=Object(i.a)(x,2),v=g[0],N=g[1],w=Object(c.useRef)(),y=Object(c.useRef)(),k=Object(c.useState)(!1),S=Object(i.a)(k,2),C=S[0],P=S[1],B=Object(c.useState)(),M=Object(i.a)(B,2),I=M[0],R=M[1],A=Object(c.useState)(!1),E=Object(i.a)(A,2),F=(E[0],E[1]),T=Object(c.useState)(!0),z=Object(i.a)(T,2),J=z[0],L=z[1],U=Object(c.useState)(!1),q=Object(i.a)(U,2),D=q[0],G=q[1],Z=Object(c.useState)(),H=Object(i.a)(Z,2),Y=H[0],ee=H[1],te=Object(c.useState)(),ne=Object(i.a)(te,2),ce=ne[0],se=ne[1],oe=Object(c.useState)([]),ae=Object(i.a)(oe,2),ie=ae[0],re=ae[1],le=Object(c.useState)([]),je=Object(i.a)(le,2),de=je[0],ue=je[1],be=Object(c.useState)(),he=Object(i.a)(be,2),Oe=(he[0],he[1]),me=Object(c.useState)(!1),pe=Object(i.a)(me,2),fe=pe[0],xe=pe[1],ge=Object(c.useState)(!1),ve=Object(i.a)(ge,2),Ne=ve[0],we=ve[1],ye=Object(c.useState)(!1),ke=Object(i.a)(ye,2),Se=ke[0],Ce=ke[1],_e=Object(c.useState)(!0),Pe=Object(i.a)(_e,2),Be=Pe[0],Me=Pe[1],Ie=Object(c.useRef)(),Re=Object(c.useState)(),Ae=Object(i.a)(Re,2),Ee=Ae[0],Fe=Ae[1];function Te(){fetch("/user/".concat(f),{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){return t.json().then((function(t){t.error?(console.log(t.error),e.push("/")):(a(t.user),p(t.post))})).catch((function(t){console.log(t),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")}))}))}function ze(e){fetch("/post/li-com-info/".concat(e),{method:"GET",headers:{contentType:"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){e.json().then((function(e){Fe(e.post)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}function Je(e,t){fetch("./post/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postID:e})}).then((function(t){t.json().then((function(t){R(t);var n=m.map((function(e){return e._id===t._id?t:e}));p(n),Te(),ze(e)})).catch((function(e){console.log(e)}))}))}function Le(e){return e.likes.includes(t._id)?Object(_.jsx)("button",{className:"post-card-like-button",onClick:function(){Je(e._id,"dislike")},children:Object(_.jsx)(u.a,{})}):Object(_.jsx)("button",{className:"post-card-like-button",onClick:function(){Je(e._id,"like")},children:Object(_.jsx)(u.b,{})})}function Ue(e,t){fetch("./post/comment",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:e,postId:t})}).then((function(e){e.json().then((function(e){N(""),R(e);var n=m.map((function(t){return t._id===e._id?e:t}));p(n),ze(t)})).catch((function(e){console.log(e)}))}))}function qe(){return Object(_.jsxs)("div",{className:"nothing-to-show-container",children:[Object(_.jsx)("p",{children:"Nothing to show"}),Object(_.jsx)("div",{className:"nothing-to-show-svg-container",children:Object(_.jsx)(h.a,{})})]})}return Object(c.useEffect)((function(){t&&window.location.pathname==="/".concat(t._id)&&e.push("/profile"),Te(),fetch("/user/".concat(f,"/influence"),{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){return t.json().then((function(t){t.error?(console.log(t.error),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")):(Oe(t.user.requested),ue(t.user.followers),re(t.user.following))})).catch((function(t){console.log(t),e.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")}))}))}),[t]),void 0==m?Object(_.jsx)("div",{className:"Loader",children:Object(_.jsx)(K.a,{})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(V,{}),Object(_.jsx)("div",{className:"layout-container",children:t?Object(_.jsx)(X,{}):null}),Ne?Object(_.jsx)("div",{className:"coverProfilePicModal-container",children:Object(_.jsxs)("div",{className:"coverProfilePicModal-container-img-wrapper",children:[Object(_.jsx)(Q.a,{onClick:function(){we(!1)}}),Object(_.jsx)("img",{src:o.coverPhoto})]})}):null,fe?Object(_.jsx)("div",{className:"coverProfilePicModal-container",children:Object(_.jsxs)("div",{className:"coverProfilePicModal-container-img-wrapper",children:[Object(_.jsx)(Q.a,{onClick:function(){xe(!1)}}),Object(_.jsx)("img",{src:o.profilePhoto})]})}):null,I&&C?(ze(I._id),Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"postModal-container",children:Object(_.jsxs)("div",{className:"postModal-image-info-container",children:[Object(_.jsx)("div",{className:"post-modal-cancel-button",children:Object(_.jsx)($.a,{onClick:function(){P(!1),R()}})}),I.photo?Object(_.jsx)("div",{className:"postModal-image",children:Object(_.jsx)("img",{className:"post-card-img",src:I.photo})}):null,Object(_.jsxs)("div",{className:"postModal-info-container",children:[Object(_.jsxs)("div",{className:"name-photo-container",children:[Object(_.jsx)("div",{className:"postModal-postedby-photo-container",children:Object(_.jsx)("img",{src:I.postedBy.profilePhoto})}),Object(_.jsx)("label",{className:"postModal-post-by",children:Object(_.jsx)(l.b,{to:t.id===I.postedBy._id?"./profile":"/".concat(I.postedBy._id),children:I.postedBy.name})}),t._id===I.postedBy._id?Object(_.jsxs)("div",{className:"postModal-delete-post-button",onClick:function(){return F(I._id)},children:[Object(_.jsx)("button",{children:Object(_.jsx)(d.b,{})})," "]}):null]}),Object(_.jsx)("p",{className:"postModal-post-title",children:I.title}),Object(_.jsxs)("div",{className:"post-modal-li-com-toggle-container",children:[Object(_.jsx)("button",{className:Se?"postModal-comments-heading active-li-com":"postModal-comments-heading",onClick:function(){Me(!1),Ce(!0)},children:"Likes"}),Object(_.jsx)("button",{className:Be?"postModal-comments-heading active-li-com":"postModal-comments-heading",onClick:function(){Me(!0),Ce(!1)},children:"Comments"})]}),Se&&Ee?Object(_.jsx)("div",{ref:Ie,className:"scrolling-container",id:"comments-holder",children:Ee.likes.map((function(e,t){return Object(_.jsxs)("div",{className:"comment-wrapper",children:[Object(_.jsx)("div",{className:"comment-wrapper-image-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsxs)("label",{children:[Object(_.jsx)(l.b,{to:"/".concat(e._id),children:e.name})," "]})]},t)}))}):null,Be&&Ee?Object(_.jsx)("div",{ref:Ie,className:"scrolling-container",id:"comments-holder",children:Ee.comments.map((function(e,n){return Object(_.jsxs)("div",{className:"comment-wrapper",children:[Object(_.jsx)("div",{className:"comment-wrapper-image-container",children:Object(_.jsx)("img",{src:e.postedBy.profilePhoto})}),Object(_.jsxs)("label",{children:[Object(_.jsxs)(l.b,{to:"/".concat(e.postedBy._id),target:"_blank",children:[e.postedBy.name," : "]})," "]}),Object(_.jsx)("p",{className:"postModal-each-comment",children:e.text}),e.postedBy._id===t._id?Object(_.jsx)(Q.a,{className:"postModal-delete-comment-button",onClick:function(){var t,n;t=e.text,n=I._id,fetch("./post/delete-comment/".concat(n),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:t,postId:n})}).then((function(e){return e.json().then((function(e){R(e),Te(),ze(n)})).catch((function(e){return console.log(e)}))}))}}):null]},n)}))}):null,Object(_.jsxs)("div",{className:"postModal-li-com-container",children:[Le(I),Object(_.jsxs)("span",{className:"postModal-likes-number",children:[I.likes.length," Likes"]}),Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(W.a,{})]}),Object(_.jsxs)("label",{className:"postModal-likes-number",children:[I.comments.length," Comments"]})]}),Object(_.jsxs)("div",{className:"postModal-comment-section",children:[Object(_.jsx)("input",{ref:y,type:"text",className:"postModal-comment-input",placeholder:"add you comment here",value:v,onChange:function(e){return N(e.target.value)}}),/\S/.test(v)?Object(_.jsx)("button",{className:"postModal-comment-button",onClick:function(){Ue(y.current.value,I._id)},children:Object(_.jsx)(d.e,{})}):null]})]})]})})})):null,Object(_.jsx)("div",{className:"cover-photo-container",children:Object(_.jsx)("img",{className:"cover-photo",src:o.coverPhoto,onClick:function(){we(!0)}})}),Object(_.jsx)("div",{className:"profile-img-reference",children:Object(_.jsx)("div",{className:"profile-img-wrapper",children:Object(_.jsx)("img",{src:o.profilePhoto,onClick:function(){xe(!0)}})})}),Object(_.jsxs)("div",{className:"profile-container",children:[Object(_.jsx)("div",{className:"profile-info-container",children:Object(_.jsxs)("div",{className:"profile-details-container",children:[Object(_.jsx)("p",{children:o.name}),Object(_.jsx)("div",{className:"profile-details-button-container",children:f!==t._id?o.followers.includes(t._id)?Object(_.jsxs)("button",{onClick:function(){var e;e=f,fetch("/user/unfollow",{method:"PUT",headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:e})}).then((function(e){return e.json().then((function(e){a(e.result)})).catch((function(e){return console.log(e)}))}))},children:["Unfollow",Object(_.jsx)(h.e,{})]}):o.requests.includes(t._id)?Object(_.jsxs)("button",{onClick:function(){var e;e=f,fetch("/user/cancel-follow",{method:"put",headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:e})}).then((function(e){return e.json().then((function(e){a(e.result2)})).catch((function(e){return console.log(e)}))}))},children:["Pending",Object(_.jsx)(h.e,{})]}):Object(_.jsxs)("button",{onClick:function(){var e;e=f,fetch("/user/request-follow",{method:"PUT",headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:e})}).then((function(e){return e.json().then((function(e){a(e.result)})).catch((function(e){return console.log(e)}))}))},children:["Follow",Object(_.jsx)(h.d,{})]}):null}),o.followers.includes(t._id)||f===t._id?Object(_.jsxs)("div",{className:"profile-details-container-spans",children:[Object(_.jsx)("span",{class:J?"tabActive":"",onClick:function(){L(!0),G(!1),se(!1),ee(!1)},children:"Gallery"}),Object(_.jsxs)("span",{class:D?"tabActive":"",onClick:function(){L(!1),G(!0),se(!1),ee(!1)},children:["(",m.length,") Posts"]}),Object(_.jsxs)("span",{class:Y?"tabActive":"",onClick:function(){L(!1),G(!1),se(!1),ee(!0)},children:[" (",o.followers.length,") Followers"]}),Object(_.jsxs)("span",{class:ce?"tabActive":"",onClick:function(){L(!1),G(!1),se(!0),ee(!1)},children:["(",o.following.length,") Following"]})]}):Object(_.jsxs)("div",{className:"nothing-to-show-container",children:[Object(_.jsx)("p",{children:"Profile Locked"}),Object(_.jsx)("div",{className:"nothing-to-show-svg-container",children:Object(_.jsx)(u.e,{})})]})]})}),!0===(J&&o.followers.includes(t._id))?Object(_.jsx)("div",{className:"profile-photos-container",style:0===m.length?{display:"block",marginTop:"0"}:{},children:m.map((function(e,t){return e.photo?Object(_.jsx)("div",{className:"profile-photo-wrapper",children:Object(_.jsx)("img",{onClick:function(){P(!0),R(e)},src:e.photo})},t):null}))}):null,!0===(D&&o.followers.includes(t._id))?Object(_.jsx)(_.Fragment,{children:0===m.length?qe():m.map((function(e,n){return Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"post-card",children:[Object(_.jsx)("div",{className:"postedby-photo-container",children:Object(_.jsx)("img",{src:e.postedBy.profilePhoto})}),Object(_.jsx)("p",{className:"post-card-by",children:Object(_.jsx)(l.b,{to:t.id===e.postedBy._id?"./profile":"/".concat(e.postedBy._id),children:e.postedBy.name})}),Object(_.jsx)("p",{className:"post-card-title",children:e.title}),t._id===e.postedBy._id?Object(_.jsx)("button",{className:"delete-post-button",onClick:function(){return F(!0)},children:Object(_.jsx)(d.b,{})}):null,Object(_.jsx)("img",{onClick:function(){P(!0),ze(e._id),R(e)},className:"post-card-img",src:e.photo}),Object(_.jsxs)("div",{className:"li-com-container",children:[Le(e),Object(_.jsxs)("span",{className:"likes-number",onClick:function(){Me(!1),Ce(!0),P(!0),R(e)},children:[e.likes.length," Likes"]}),Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(W.a,{})]}),Object(_.jsxs)("label",{className:"likes-number",onClick:function(){Me(!0),Ce(!1),P(!0),R(e)},children:[e.comments.length," Comments"]})]}),Object(_.jsxs)("div",{className:"comment-section",children:[Object(_.jsx)("input",{ref:w,type:"text",className:"comment-input",placeholder:"add you comment here",value:v,onChange:function(e){return N(e.target.value)}}),/\S/.test(v)?Object(_.jsx)("button",{className:"comment-button",onClick:function(){w.current&&Ue(w.current.value,e._id)},children:Object(_.jsx)(d.e,{})}):null]})]},n)})}))}):null,!0===(Y&&o.followers.includes(t._id))?Object(_.jsx)(_.Fragment,{children:0===ie.length?qe():de.map((function(e,t){return Object(_.jsxs)("div",{className:"followers-list-container",children:[Object(_.jsx)("div",{className:"followers-profile-img-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsx)(l.b,{to:"/".concat(e._id),target:"_blank",children:e.name})]},t)}))}):null,!0===(ce&&o.followers.includes(t._id))?Object(_.jsx)(_.Fragment,{children:0===ie.length?qe():ie.map((function(e,t){return Object(_.jsxs)("div",{className:"followers-list-container",children:[Object(_.jsx)("div",{className:"followers-profile-img-container",children:Object(_.jsx)("img",{src:e.profilePhoto})}),Object(_.jsx)(l.b,{to:"/".concat(e._id),target:"_blank",children:e.name})]},t)}))}):null]})]})},ae=function(){var e=Object(c.useContext)(j),t=(e.state,e.dispatch),n=Object(c.useState)(""),s=Object(i.a)(n,2),o=s[0],a=s[1],l=Object(c.useState)(),d=Object(i.a)(l,2),u=d[0],b=d[1],h=Object(r.g)();return Object(c.useEffect)((function(){u&&fetch("/change-dp",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({newUrl:u})}).then((function(e){return e.json().then((function(e){localStorage.setItem("user",JSON.stringify(e)),t({type:"USER",payload:e}),h.push("/profile")})).catch((function(e){return console.log(e)}))}))}),[u]),Object(c.useEffect)((function(){o&&function(){var e=new FormData;e.append("file",o),e.append("upload_preset","social-photos"),e.append("cloud_name","dxuwjnsg5"),fetch("https://api.cloudinary.com/v1_1/dxuwjnsg5/image/upload",{method:"POST",body:e}).then((function(e){e.json().then((function(e){e.error&&console.log(e.error),b(e.url)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}()}),[o]),Object(_.jsx)("div",{children:Object(_.jsx)(I,{children:Object(_.jsx)(Z,{children:Object(_.jsx)(J,{selectedFile:function(e){a(e)},closeModal:function(e){h.push("/profile")}})})})})},ie=Object(y.a)({iconButton:{position:"absolute",top:"20px",right:"20px"},cancelIcon:{color:"#00a3c8",fontSize:"50px","&:hover":{color:"red"}}});function re(e){ie();var t=s.a.useRef(),n=function(){return t.current.click()},c=s.a.useContext(M),o=s.a.useState(null),a=Object(i.a)(o,2),r=a[0],l=a[1],j=s.a.useState(null),b=Object(i.a)(j,2),h=b[0],O=b[1],g=s.a.useState({x:0,y:0}),v=Object(i.a)(g,2),w=v[0],y=v[1],k=s.a.useState(1),S=Object(i.a)(k,2),C=S[0],P=S[1],B=function(){var t=Object(p.a)(m.a.mark((function t(){var n,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",c(!0,"select an image!","warning"));case 2:return t.next=4,N(r,h);case 4:n=t.sent,s=n.toDataURL("image/jpeg"),o=R(s,"cropped-image.jpeg"),e.sendFile(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"change-pic-container",children:Object(_.jsxs)("div",{className:"change-pic-middle-container",children:[Object(_.jsx)("div",{className:"change-pic-heading",children:Object(_.jsx)(u.d,{onClick:function(){e.close("close")}})}),Object(_.jsx)("div",{className:"container-cropper-wrapper",children:Object(_.jsx)("div",{className:"container-cropper",children:r?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"cropper",children:Object(_.jsx)(f.a,{image:r,crop:w,zoom:C,aspect:2.62,onCropChange:y,onZoomChange:P,onCropComplete:function(e,t){O(t)}})}),Object(_.jsx)("div",{className:"slider",children:Object(_.jsx)(x.a,{min:1,max:3,step:.1,value:C,onChange:function(e,t){return P(t)},color:"secondary"})})]}):Object(_.jsxs)("div",{className:"select-img-container",onClick:n,children:[Object(_.jsx)("div",{className:"select-img-wrapper",children:Object(_.jsx)(F.a,{})}),Object(_.jsx)("p",{children:"Please Select an image"})]})})}),Object(_.jsxs)("div",{className:"container-buttons",children:[Object(_.jsx)("input",{type:"file",accept:"image/*",ref:t,onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.addEventListener("load",(function(){l(t.result)}))}},style:{display:"none"}}),Object(_.jsx)("button",{className:"MdClear",onClick:function(){return function(){if(!r)return c(!0,"select an image!","warning");l(null)}()},children:Object(_.jsx)(d.a,{})}),Object(_.jsx)("button",{className:"CgBrowser",onClick:n,children:Object(_.jsx)(A.a,{})}),Object(_.jsx)("button",{className:"FiUpload",onClick:B,children:Object(_.jsx)(E.b,{})})]})]})})}function le(e){return Object(_.jsx)(re,{sendFile:function(t){e.selectedFile(t)},close:function(t){e.closeModal(t)}})}var je=function(){var e=Object(c.useContext)(j),t=(e.state,e.dispatch),n=Object(c.useState)(""),s=Object(i.a)(n,2),o=s[0],a=s[1],l=Object(c.useState)(),d=Object(i.a)(l,2),u=d[0],b=d[1],h=Object(r.g)();return Object(c.useEffect)((function(){u&&fetch("/change-cover",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({newUrl:u})}).then((function(e){return e.json().then((function(e){localStorage.setItem("user",JSON.stringify(e)),t({type:"USER",payload:e}),h.push("/profile")})).catch((function(e){console.log(e),h.push("/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf")}))}))}),[u]),Object(c.useEffect)((function(){o&&function(){var e=new FormData;e.append("file",o),e.append("upload_preset","social-photos"),e.append("cloud_name","dxuwjnsg5"),fetch("https://api.cloudinary.com/v1_1/dxuwjnsg5/image/upload",{method:"POST",body:e}).then((function(e){e.json().then((function(e){e.error&&console.log(e.error),b(e.url)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}()}),[o]),Object(_.jsx)("div",{children:Object(_.jsx)(I,{children:Object(_.jsx)(Z,{children:Object(_.jsx)(le,{selectedFile:function(e){a(e)},closeModal:function(e){h.push("/profile")}})})})})},de=n(31),ue=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),a=Object(i.a)(o,2),r=a[0],l=a[1],j=Object(c.useState)(""),d=Object(i.a)(j,2),u=d[0],b=d[1],h=Object(c.useState)(!1),O=Object(i.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(!0),x=Object(i.a)(f,2),g=x[0],v=x[1];var N=function(){return L.b.success("Password changed sucessfully",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{className:"change-pass-heading",children:"Change your Password"}),Object(_.jsxs)("div",{className:"change-pass-form",children:[Object(_.jsx)("div",{className:"change-pass-containers old-pass",children:Object(_.jsx)("input",{type:"password",value:n,onChange:function(e){s(e.target.value)},placeholder:"Enter Old Password"})}),Object(_.jsx)("div",{className:"change-pass-containers new-pass",children:Object(_.jsx)("input",{type:"password",value:r,onChange:function(e){!function(e){l(e.target.value),/(?=^.{6,}$)(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])(?=.*[^A-Za-z0-9]).*/.test(String(r))?v(!0):v(!1)}(e)},placeholder:"Enter New Password"})}),Object(_.jsx)("div",{className:"change-pass-containers",children:Object(_.jsx)("input",{type:"password",value:u,onChange:function(e){b(e.target.value)},placeholder:"Enter Confirm Password"})}),r!==u?Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:Object(_.jsx)("li",{children:"new password and confirm password does not match"})})}):null,g?null:Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:Object(_.jsx)("li",{children:"new Password must contain a digit, an uppercase letter, a lowercase letter, a character not being alphanumeric."})})}),m?Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:Object(_.jsx)("li",{children:"Wrong old password"})})}):null,n&&g&&r===u?Object(_.jsx)("button",{onClick:function(e){fetch("/user/change-password",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({oldPass:n,newPass:r})}).then((function(e){e.json().then((function(e){e.error?p(!0):(p(!1),N())})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Submit"}):Object(_.jsx)("button",{children:"Submit"})]})]})},be=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(!1),a=Object(i.a)(o,2),r=a[0],l=a[1],d=Object(c.useContext)(j),u=(d.state,d.dispatch);var b=function(){return L.b.success("Name changed sucessfully",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L.a,{}),Object(_.jsx)("p",{className:"change-name-heading",children:"Change your name"}),Object(_.jsxs)("div",{className:"change-name-form",children:[Object(_.jsx)("input",{type:"text",value:n,onChange:function(e){s(e.target.value)},placeholder:"Enter New Name here..."}),r?Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:"Please enter all the fields correctly"})}):null]}),Object(_.jsx)("button",{className:"change-name-button",onClick:function(){fetch("/user/change-name",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({newName:n})}).then((function(e){e.json().then((function(e){if(e.error)l(!0);else{var t=JSON.parse(localStorage.getItem("user"));t.name=n,u({type:"USER",payload:t}),localStorage.setItem("user",JSON.stringify(t)),b()}})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Change Name"})]})},he=function(){var e=Object(r.g)(),t=Object(c.useContext)(j),n=(t.state,t.dispatch),s=Object(c.useState)(!1),o=Object(i.a)(s,2),a=o[0],l=o[1],d=Object(c.useState)(""),u=Object(i.a)(d,2),b=u[0],h=u[1],O=Object(c.useState)(!1),m=Object(i.a)(O,2),p=m[0],f=m[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{className:"delete-acc-heading",children:"Delete your account"}),Object(_.jsxs)("div",{className:"delete-acc-form",children:[Object(_.jsx)("div",{children:Object(_.jsx)("input",{type:"password",value:b,onChange:function(e){h(e.target.value)},placeholder:"Enter Password"})}),Object(_.jsxs)("div",{className:"delete-acc-confirmation",children:[Object(_.jsx)("input",{type:"checkbox",onChange:function(e){f(e.target.checked)}}),Object(_.jsx)("p",{children:"I am sure and I want to delete my account permanently"})]}),a?Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:"Please enter all the fields correctly"})}):null]}),Object(_.jsx)("button",{className:"delete-acc-button",onClick:function(){fetch("/user/delete-account",{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({checked:p,password:b})}).then((function(t){t.json().then((function(t){t.error?l(!0):(l(!1),localStorage.clear(),n({type:"CLEAR"}),e.push("/sign-in"))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Delete"})]})},Oe=function(){var e=Object(r.g)(),t=Object(c.useContext)(j),n=(t.state,t.dispatch),s=Object(c.useState)(!1),o=Object(i.a)(s,2),a=(o[0],o[1],Object(c.useState)(!1)),l=Object(i.a)(a,2),d=l[0],u=l[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{className:"delete-acc-heading",children:"Signout"}),Object(_.jsx)("div",{className:"delete-acc-form",children:Object(_.jsxs)("div",{className:"delete-acc-confirmation",children:[Object(_.jsx)("input",{type:"checkbox",onChange:function(e){u(e.target.checked)}}),Object(_.jsx)("p",{children:" I want to signout."})]})}),Object(_.jsx)("button",{className:"delete-acc-button",onClick:function(){d&&(localStorage.clear(),n({type:"CLEAR"}),e.push("/sign-in"))},children:"Sign out"})]})},me=function(){var e,t,n,s=Object(c.useContext)(j),o=s.state;s.dispatch,Object(r.g)();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(V,{}),Object(_.jsx)("div",{className:"layout-container",children:o?Object(_.jsx)(X,{}):null}),Object(_.jsxs)("div",{className:"settings-container",children:[Object(_.jsxs)("div",{className:"settings-link-container",children:[Object(_.jsx)(l.b,{to:"/settings/change-name",className:"/settings/change-name"===window.location.pathname?"settings-link settings-link-Active":"settings-link",children:"Change Name"}),Object(_.jsx)(l.b,(e={to:"/settings/change-password",className:"settings-link"},Object(de.a)(e,"className","/settings/change-password"===window.location.pathname?"settings-link settings-link-Active":"settings-link"),Object(de.a)(e,"children","Change Password"),e)),Object(_.jsx)(l.b,(t={to:"/settings/delete-account",className:"settings-link"},Object(de.a)(t,"className","/settings/delete-account"===window.location.pathname?"settings-link settings-link-Active":"settings-link"),Object(de.a)(t,"children","Delete Account"),t)),Object(_.jsx)(l.b,(n={to:"/settings/signout-settings",className:"settings-link"},Object(de.a)(n,"className","/settings/signout-settings"===window.location.pathname?"settings-link settings-link-Active":"settings-link"),Object(de.a)(n,"children","Sign Out"),n))]}),Object(_.jsx)("div",{className:"settings-each-container",children:Object(_.jsxs)(r.d,{children:[Object(_.jsx)(r.b,{path:"/settings/change-password",exact:!0,component:ue}),Object(_.jsx)(r.b,{path:"/settings/change-name",exact:!0,component:be}),Object(_.jsx)(r.b,{path:"/settings/delete-account",exact:!0,component:he}),Object(_.jsx)(r.b,{path:"/settings/signout-settings",exact:!0,component:Oe})]})})]})]})},pe=function(e){var t=Object(c.useState)(),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(!1),r=Object(i.a)(a,2),l=r[0],j=r[1],d=Object(c.useState)(!1),u=Object(i.a)(d,2),b=u[0],h=u[1];return Object(_.jsxs)("div",{className:"forgot-password-container",children:[Object(_.jsxs)("p",{className:"forgot-password-container-heading",children:[" ",l?null:"Enter the E-mail address"," "]}),l?Object(_.jsx)("div",{className:"forgot-password-email-sent-container",children:Object(_.jsx)("p",{children:"Email has been sent to the given email address for confirmation purposes. Please click on the link provided in the email to reset your password."})}):Object(_.jsxs)("div",{className:"forgot-password-input-button-container",children:[Object(_.jsx)("input",{type:"email",placeholder:"Email",value:s,onChange:function(e){o(e.target.value)}}),Object(_.jsx)("button",{onClick:function(){fetch("/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({email:s})}).then((function(e){e.json().then((function(e){e.error?h(!0):(h(!1),j(!0))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Submit"})]}),b?Object(_.jsx)("p",{className:"forgot-password-notfound-error",children:"No user found by this email !"}):null]})},fe=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),a=Object(i.a)(o,2),l=a[0],j=a[1],d=Object(c.useState)(!0),u=Object(i.a)(d,2),b=(u[0],u[1],Object(r.h)().resetToken),h=Object(c.useState)(!1),O=h.tokenExp,m=(h.setTokenExp,Object(c.useState)(!1)),p=Object(i.a)(m,2),f=p[0],x=p[1],g=""!==n.trim()&&!!/(?=^.{6,}$)(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])(?=.*[^A-Za-z0-9]).*/.test(String(n)),v=!g&&f,N=Object(r.g)(),w=!1;g&&l==n&&(w=!0);var y=function(){return L.b.success("Password changed sucessfully",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},k=function(){return L.b.error("Token expired. Try Again",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return O?Object(_.jsx)("div",{className:"reset-password-container",children:Object(_.jsx)("div",{className:"forgot-password-email-sent-container",children:Object(_.jsxs)("p",{children:["Sorry the token has expired please ",Object(_.jsx)("a",{href:"/forgot-password",style:{color:"blue"},children:"try again"}),"."]})})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L.a,{}),Object(_.jsxs)("div",{className:"reset-password-container",children:[Object(_.jsxs)("p",{className:"forgot-password-container-heading",children:[" ","Enter new password"," "]}),Object(_.jsxs)("div",{className:"reset-password-newpass",children:[Object(_.jsx)("label",{}),Object(_.jsx)("input",{type:"password",value:n,onChange:function(e){!function(e){s(e.target.value)}(e)},onBlur:function(){x(!0)},placeholder:"New Password"})]}),Object(_.jsxs)("div",{className:"reset-password-confirmpass",children:[Object(_.jsx)("label",{}),Object(_.jsx)("input",{type:"password",value:l,onChange:function(e){j(e.target.value)},placeholder:"Confirm Password"})]}),n!==l&&Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:Object(_.jsx)("li",{children:"new password and confirm password does not match"})})}),v&&Object(_.jsx)("div",{className:"settings-error-container",children:Object(_.jsx)("p",{children:Object(_.jsx)("li",{children:"new Password must contain a digit, an uppercase letter, a lowercase letter, a character not being alphanumeric."})})}),w?Object(_.jsx)("button",{onClick:function(e){fetch("/auth/reset-password",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({resetToken:b,newPass:n})}).then((function(e){e.json().then((function(e){e.error?(k(),setInterval((function(){N.push("/forgot-password")}),3e3)):(y(),setTimeout((function(){N.push("/sign-in")}),2e3))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Submit"}):Object(_.jsx)("button",{children:"Submit"})]})]})},xe=(n(62),function(){var e=Object(r.g)();return Object(_.jsx)("div",{className:"FOF-page",children:Object(_.jsxs)("div",{className:"FOF-container",children:[Object(_.jsx)("h1",{children:"404"}),Object(_.jsx)("div",{className:"error-svg-container",children:Object(_.jsx)(W.b,{})}),Object(_.jsx)("h3",{children:"Page not found "}),Object(_.jsx)("button",{onClick:function(){e.goBack()},children:"Go Back"})]})})}),ge=function(){var e=Object(r.g)();return Object(_.jsx)("div",{className:"FOF-page",children:Object(_.jsxs)("div",{className:"FOF-container",children:[Object(_.jsx)("h1",{children:"500"}),Object(_.jsx)("div",{className:"error-svg-container",children:Object(_.jsx)(W.b,{})}),Object(_.jsx)("h3",{children:"Server Error"}),Object(_.jsx)("button",{onClick:function(){e.goBack()},children:"Go Back"})]})})};n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111);function ve(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:void 0}function Ne(){Object(r.h)().userid,Object(r.h)().resetToken;var e=Object(c.useContext)(j),t=(e.state,e.dispatch),n=Object(r.g)();return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e?t({type:"USER",payload:e}):n.location.pathname.startsWith("/forgot-password")||n.location.pathname.startsWith("/reset-password")||n.push("/sign-in")}),[]),Object(_.jsx)("div",{className:"home-toggling-container",children:Object(_.jsxs)(r.d,{children:[Object(_.jsx)(r.b,{path:"/",exact:!0,component:ee}),Object(_.jsx)(r.b,{path:"/sign-in",exact:!0,component:ne}),Object(_.jsx)(r.b,{path:"/sign-up",exact:!0,component:ce}),Object(_.jsx)(r.b,{path:"/profile",exact:!0,component:se}),Object(_.jsx)(r.b,{path:"/settings",component:me}),Object(_.jsx)(r.b,{path:"/change-cover-picture",component:je}),Object(_.jsx)(r.b,{path:"/forgot-password",component:pe}),Object(_.jsx)(r.b,{path:"/change-profile-picture",exact:!0,component:ae}),Object(_.jsx)(r.b,{path:"/:userid",exact:!0,component:oe}),Object(_.jsxs)(r.b,{path:"/reset-password/:resetToken",exact:!0,children:[Object(_.jsx)(fe,{})," "]}),Object(_.jsx)(r.b,{path:"/ERROR500/sadfijsoaidfjosidjfoi34234242423sdfsdf",component:ge}),Object(_.jsx)(r.b,{path:"/ERROR404/aoisdfhaisohdfoashfoasidfhasoidfhoasifh",component:xe}),Object(_.jsx)(r.b,{path:"*",render:function(){return Object(_.jsx)(r.a,{to:"/ERROR404/aoisdfhaisohdfoashfoasidfhasoidfhoasifh"})}})]})})}var we=function(){var e=Object(c.useReducer)(ve,null),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(l.a,{children:Object(_.jsx)(j.Provider,{value:{state:n,dispatch:s},children:Object(_.jsx)(Ne,{})})})})};a.a.render(Object(_.jsx)(we,{}),document.getElementById("root"))},57:function(e,t,n){},62:function(e,t,n){},79:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.230d8925.chunk.js.map